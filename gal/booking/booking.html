<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Naganya Groove - Book Your Ride</title>
    <!-- Ensure this is the correct stylesheet for your booking page.
         The original prompt used style.css for the booking page.
         If gal.css is indeed correct, leave it. If not, change to style.css -->
    <link rel="stylesheet" href="gal.css"> <!-- Or gal.css if that's intended -->
    <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Montserrat:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="icon" href="favicon.jpg" type="image/png">
</head>
<body>

    <header>
        <nav>
            <a href="/index.html" class="nav-logo animate-on-load" style="animation-name: fadeInLeft;">NG</a>
            <div class="nav-links-center">
                <a href="/blog/blog.html" class="nav-link-active">Blog</a>
                <a href="/gallery/gallery.html">Gallery</a>
                <a href="/merch/merch.html">Merch</a>
            </div>
            <a href="/booking/booking.html" class="nav-cta">Book Now</a> <!-- Update href later -->
        </nav>
    </header>

    <main>
        <section id="booking-hero" class="page-hero-section">
            <div class="hero-overlay"></div>
            <div class="hero-content">
                <h1 class="animate-on-load hero-title" style="animation-name: fadeInUp; animation-delay: 0.5s;">Secure Your Seat</h1>
                <p class="page-hero-subtitle animate-on-load" style="animation-name: fadeInUp; animation-delay: 0.7s;">Experience the Vibe, Hassle-Free</p>
            </div>
        </section>

        <section id="booking-form-section" class="content-section">
            <div class="booking-container">
                <div class="booking-form-wrapper animate-on-scroll" data-animation="fadeInLeft-scroll">
                    <h2>Plan Your Journey</h2>
                    <p class="form-intro">Fill in the details below, and we'll get back to you to confirm your Manyanga experience. Hii ni form tu, si malipo bado! (This is just a form, not payment yet!)</p>
                    <form id="matatu-booking-form">
                        <div class="form-group">
                            <label for="fullName">Full Name <span class="required">*</span></label>
                            <input type="text" id="fullName" name="fullName" placeholder="e.g., Juma Otieno" required>
                        </div>

                        <div class="form-group">
                            <label for="phone">Phone Number <span class="required">*</span></label>
                            <input type="tel" id="phone" name="phone" placeholder="e.g., 0712 345 678" required>
                        </div>

                        <div class="form-group">
                            <label for="email">Email Address</label>
                            <input type="email" id="email" name="email" placeholder="e.g., juma.otieno@email.com">
                        </div>

                        <div class="form-group form-group-half">
                            <div>
                                <label for="route">Preferred Route <span class="required">*</span></label>
                                <select id="route" name="route" required>
                                    <option value="" disabled selected>Select a Route...</option>
                                    <option value="route102_kikuyu">Route 102 - Kikuyu Town</option>
                                    <option value="route105_kikuyu">Route 105 - Kikuyu Town via Waiyaki</option>
                                    <option value="route11_ngong">Route 111 - Ngong Town</option>
                                    <option value="route46_kawangware">Route 46 - Kawangware</option>
                                    <option value="route_city_stadium_mmb">Route - City Stadium/Makadara via Msa Rd</option>
                                    <option value="route_eastleigh">Route 9/6 - Eastleigh</option>
                                    <option value="route_buruburu">Route 58 - Buruburu</option>
                                    <option value="other">Other (Specify Below)</option>
                                </select>
                            </div>
                            <div>
                                <label for="travelDate">Date of Travel <span class="required">*</span></label>
                                <input type="date" id="travelDate" name="travelDate" required>
                            </div>
                        </div>
                        
                        <div class="form-group form-group-half">
                             <div>
                                <label for="passengers">Number of Passengers <span class="required">*</span></label>
                                <input type="number" id="passengers" name="passengers" min="1" max="50" placeholder="1" required>
                            </div>
                            <div>
                                <label for="pickupTime">Preferred Pickup Time</label>
                                <input type="time" id="pickupTime" name="pickupTime">
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="specialRequests">Special Requests / Other Route</label>
                            <textarea id="specialRequests" name="specialRequests" rows="4" placeholder="Any specific Matatu name you're after? Any specific pickup points? If 'Other Route', specify here."></textarea>
                        </div>
                        
                        <div class="form-group">
                            <input type="checkbox" id="agreeTerms" name="agreeTerms" required>
                            <label for="agreeTerms" class="checkbox-label">I understand this is a booking request and not a confirmed ticket.</label>
                        </div>

                        <button type="submit" class="btn-submit-booking">
                            <i class="fas fa-paper-plane"></i> Send Booking Request
                        </button>
                        <div id="booking-status-message" style="margin-top: 15px; font-weight: 500; text-align: center;"></div>
                    </form>
                </div>

                <div class="booking-info-panel animate-on-scroll" data-animation="fadeInRight-scroll" data-delay="0.2s">
                    <img src="/images/bk.jpg" alt="Matatus on a busy Nairobi street" class="booking-info-image">
                    <h3>Why Book Through Naganya Groove?</h3>
                    <ul>
                        <li><i class="fas fa-check-circle"></i> <strong>Priority Vibes:</strong> Get connected with some of the coolest Manyangas on your route.</li>
                        <li><i class="fas fa-star"></i> <strong>Curated Experience:</strong> We try to match you with Matatus known for good music, art, and service.</li>
                        <li><i class="fas fa-route"></i> <strong>Route Guidance:</strong> Unsure about a route? We can help you figure out the best options.</li>
                        <li><i class="fas fa-users"></i> <strong>Group Bookings:</strong> Planning a trip with your squad? We can help coordinate.</li>
                        <li><i class="fas fa-headset"></i> <strong>Slightly Less Hassle:</strong> Skip some of the on-the-spot negotiation (though fares are standard).</li>
                    </ul>
                    <p class="disclaimer">Naganya Groove acts as a facilitator. Fares are paid directly to the Matatu crew upon boarding. We aim to connect you with reliable and vibrant options for your journey.</p>
                </div>
            </div>
        </section>
    </main>

    <footer>
        <div class="footer-content">
            <div class="footer-section">
                <h4>Quick Links</h4>
                <ul>
                    <li><a href="index.html">Home</a></li>
                    <li><a href="blog.html" data-page="blog">Blog</a></li>
                    <li><a href="gallery.html" data-page="gallery">Gallery</a></li>
                    <li><a href="merch.html" data-page="merch">Merch</a></li>
                    <li><a href="booking.html" data-page="booking">Book a Matatu</a></li>
                </ul>
            </div>
            <div class="footer-section">
                <h4>Contact Us</h4>
                <p>Email: info@naganyagroove.co.ke</p>
                <p>Phone: +254 700 123 456</p>
                <p>P.O. Box 12345 - 00100, Nairobi</p>
            </div>
            <div class="footer-section">
                <h4>Find Us</h4>
                <p>Matatu Terminal Hub, CBD</p>
                <p>Nairobi, Kenya</p>
                <div class="social-icons">
                    <a href="#" aria-label="Facebook"><i class="fab fa-facebook-f"></i></a>
                    <a href="#" aria-label="Instagram"><i class="fab fa-instagram"></i></a>
                    <a href="#" aria-label="Twitter"><i class="fab fa-twitter"></i></a>
                </div>
            </div>
        </div>
        <div class="footer-bottom">
            <p>Â© <span id="current-year"></span> Naganya Groove. All Rights Reserved.</p>
            <p class="watermark" style="color: #4F6D92;">web app by Nuno</p>
        </div>
    </footer>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore-compat.js"></script>

    <!-- Your Firebase setup and booking logic -->
    <script src="/firebase-config.js"></script>
    <script src="booking.js"></script> <!-- This script now solely handles the form submission -->

    <!-- Main Page Script for other functionalities -->
    <script>
        document.getElementById('current-year').textContent = new Date().getFullYear();

        // Intersection Observer for scroll animations
        const observerOptions = { root: null, rootMargin: '0px', threshold: 0.1 };
        const observerCallback = (entries, observer) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('is-visible');
                    const animationDelay = entry.target.dataset.delay;
                    if (animationDelay) entry.target.style.transitionDelay = animationDelay;
                }
            });
        };
        const scrollObserver = new IntersectionObserver(observerCallback, observerOptions);
        document.querySelectorAll('.animate-on-scroll').forEach(el => {
            const animationType = el.dataset.animation || 'fadeInUp-scroll';
            el.classList.add(animationType); // Add animation class for CSS to pick up
            scrollObserver.observe(el);
        });

        // Logic for setting min date on travelDate input
        const travelDateInput = document.getElementById('travelDate');
        if (travelDateInput) {
            const today = new Date().toISOString().split('T')[0];
            travelDateInput.setAttribute('min', today);
        }

        // The conflicting form submission handler has been REMOVED from here.
        // All form submission logic for 'matatu-booking-form' is now in booking.js
    </script>
</body>
</html>